{"version":3,"sources":["InputManager.js","utils/2d.js","utils/constants.js","gameObjects/Paddle.js","gameObjects/Ball.js","components/Instructions.js","components/Scoreboard.js","gameObjects/Wall.js","gameObjects/Goal.js","components/Settings.js","gameObjects/Particle.js","gameObjects/PlayerCard.js","components/QueueBox.js","api.js","App.js","serviceWorker.js","index.js"],"names":["InputManager","Object","classCallCheck","this","pressedKeys","left","right","window","addEventListener","handleKeys","bind","removeEventListener","value","e","keys","key","distance2d","x1","y1","x2","y2","Math","sqrt","pow","rotateVector","vect","angle","x","y","cos","sin","reflection","normal","arguments","length","undefined","dotProduct","result","Paddle","args","color","depth","width","position","paddleCenterX","paddleCenterY","previousCenterX","previousCenterY","slidinglength","tiltAngle","PI","atan","minPosition","maxPosition","powerup","powerupTimer","inputTicks","pos","ball","edge","hitbox","getHitbox","i","intersects","circleLine","apply","radius","concat","toConsumableArray","normalVector","midpoint","offset","objectSpread","magnitude","ref","dx","dy","paddleVelocity","vect1","vect2","angleBetween","state","input","hidden","ctx","context","save","translate","strokeStyle","fillStyle","rotate","fillRect","restore","_this","sw","sd","map","_rotateVector","u","v","Ball","delete","r","dr","prevX","prevY","lastUpdateTime","Date","now","renderX","renderY","beginPath","arc","fill","closePath","isNaN","console","log","boxStyle","display","alignItems","justifyContent","textAlign","padding","border","Key","react_default","a","createElement","style","background","props","content","React","Component","dropDown","bottom","dropDownContent","minHeight","zIndex","buttonStyle","margin","fontSize","borderRadius","userSelect","mainStyle","height","float","leftStyle","boxShadow","leftNumberStyle","rightStyle","marginLeft","rightNumberStyle","Scoreboard","_React$Component","_getPrototypeOf2","_len","Array","_key","possibleConstructorReturn","getPrototypeOf","call","handleOnClick","setState","inherits","createClass","userInfo","align","Instructions_Key","id","redScore","blueScore","Button","variant","onClick","Wall","moveTo","lineTo","stroke","Goal","teamId","dropdown","categoryHeader","marginTop","dropdownContent","Settings","opened","toggleDropdown","assertThisInitialized","AICheckboxChange","curveballChange","powerupsChange","accelChange","trailChange","newSettings","settings","AI","target","changeHandler","curveball","checked","powerups","accel","trail","trailCheckbox","type","onChange","Particle","lifetime","edgeLength","PlayerCard","playerName","textBaseline","font","boxwidth","measureText","rect","fillText","GameState","QueueBox","buttonText","gameState","handle","handleChangeHandler","gameStateChangeHandler","socket","openSocket","secure","PacketType","POSITION","STATE","goalText","goalTextStyle","backgroundStyling","backgroundColor","NOT_QUEUEING","QUEUEING","PRE_MATCH","RUNNING","GOAL_SCORED","POST_MATCH","Teams","App","redHandle","blueHandle","reset1v1","resetPositions","updatePaddles","changeSettings","createParticle","sendInput","update","draw","changeGameState","changeHandle","stateUpdate","posUpdate","winningTeam","tickCounter","cutsceneCounter","gameId","ourPlayer","prevInput","bindKeys","matchCb","overCb","refs","canvas","getContext","requestAnimationFrame","setInterval","matchFound","gameOver","on","data","particles","walls","goals","paddles","playerCards","packet","scorer","frame","tempBall","updatePosition","paddlePos","forEach","paddle","push","_this3","shift","particle","_ref","hitboxArr","circlePolygon","newVelocity","getReflection","wall","_this4","postGameText","goal","card","p","tick","emit","unbindKeys","newHandle","newState","cb","queueingAck","QueueBox_QueueBox","Scoreboard_Scoreboard","Settings_Settings","Boolean","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.dfdc2848.chunk.js","sourcesContent":["\r\n\r\n export default class InputManager {\r\n\r\n\tbindKeys() {\r\n\t\twindow.addEventListener('keyup',   this.handleKeys.bind(this, false));\r\n\t\twindow.addEventListener('keydown', this.handleKeys.bind(this, true));\r\n\t}\r\n\t\r\n\tunbindKeys() {\r\n\t\twindow.removeEventListener('keyup', this.handleKeys);\r\n\t\twindow.removeEventListener('keydown', this.handleKeys);\r\n\t}\r\n\tconstructor() {\r\n\t\tthis.pressedKeys = {left:false,right:false};\r\n\t}\r\n\r\n\r\n\t// The pressedKeys object holds either a 0 or a 1 for each key whether it is pressed or not\r\n\t// It is always updated in real time once the eventListener is added\r\n\thandleKeys(value, e){\r\n\t\tlet keys = this.pressedKeys;\r\n\t\t\r\n\t\tswitch (e.key) {\r\n\t\t\r\n\t\t\tcase 'a':case 'A':\r\n\t\t\t\tkeys.left = value?true:false;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'd':case 'D':\r\n\t\t\t\tkeys.right = value?true:false;\r\n\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t }\r\n\t\t this.pressedKeys = keys;\r\n\t }\r\n\t \r\n }","// A file containing simple functions for 2d grid related calculations\r\n\r\nexport function distance2d(x1,y1,x2,y2) {\r\n\treturn Math.sqrt((x1-x2)**2 + (y1-y2)**2);\r\n}\r\n\r\nexport function rotateVector(vect, angle) {\r\n\tlet {x,y} = vect;\r\n\treturn {\r\n\t\tx: Math.cos(angle)*x - Math.sin(angle)*y,\r\n\t\ty: Math.sin(angle)*x + Math.cos(angle)*y\r\n\t}\r\n}\t\r\n\r\n// Returins a vector which is the result of *vect* bouncing off a surface with normal *normal*\r\n// normal must have magnitude 1\r\n// d' = d - 2(d.n)n\r\nexport function reflection(vect,normal,scalingFactor = 1.0) {\r\n\tlet dotProduct = normal.x*vect.x + normal.y*vect.y;\r\n\tlet result = vect;\r\n\tresult.x -= 2*dotProduct*normal.x;\r\n\tresult.y -= 2*dotProduct*normal.y;\r\n\treturn result;\r\n}\r\n\r\nexport function angleBetween(vect1, vect2) {\r\n\tlet {x:x1,y:y1} = vect1;\r\n\tlet {x:x2,y:y2} = vect2;\r\n\treturn Math.atan(x1*y2-y1*x2,x1*x2+y1*y2);\r\n\r\n}","\r\nexport const updateRate = 120;\r\nexport const updateTime = 1000/updateRate;\r\nexport const ballInitSpeed = 3*60/updateRate;\r\nexport const paddleSpeed = 60/updateRate;\r\nexport const ballMinSpeed = 2 * 60/updateRate;","\nimport {distance2d ,rotateVector, reflection, angleBetween} from '../utils/2d';\nimport intersects from 'intersects';\nimport { randomBetween } from '../utils/math';\nimport { paddleSpeed, ballInitSpeed } from '../utils/constants';\n\n// Class that handles drawing the paddle\nexport default class Paddle {\n\tconstructor(args) {\n\n\t\t// x1,y1 and x2,y2 represent the starting and ending point where the paddle can slide in between\n\t\tthis.x1 = args.x1 || 0;\n\t\tthis.y1 = args.y1 || 0;\n\t\tthis.x2 = args.x2 || 0;\n\t\tthis.y2 = args.y2 || 0;\n\t\tthis.color = args.color || \"#000\";\n\t\t\n\t\t// Depth and width are dimensions of the paddle\n\t\tthis.depth = args.depth || 10;\n\t\tthis.width = args.width || 50;\n\n\t\tthis.position = 50; // Percentage value showing how far the paddle is from its first endpoint to the other\n\t\t// Ex. 0 means it is at (x1,y1) , 100 means at (x2,y2), 50 means it is in between\n\t\tthis.paddleCenterX = (this.x1+this.x2)/2;\n\t\tthis.paddleCenterY = (this.y1+this.y2)/2;\n\t\tthis.previousCenterX = this.paddleCenterX;\n\t\tthis.previousCenterY = this.paddleCenterY;\n\n\t\tthis.slidinglength = distance2d(this.x1,this.y1,this.x2,this.y2);\n\t\tif (this.y1 === this.y2) {\n\t\t\tthis.tiltAngle = 90*Math.PI/180;\n\t\t} else {\n\t\t\tthis.tiltAngle = -Math.atan((this.x2-this.x1)/(this.y2-this.y1));\n\t\t}\n\n\t\t// The min and max value of position so that the ends of the paddle dont cross x1,y1 and x2,y2\n\t\t// Ex. if a paddle is 10px wide and the total length is 100px, min and max pos will be 5% and 95% \n\t\tthis.minPosition = 100*(this.width/this.slidinglength)/2;\n\t\tthis.maxPosition = 100*(1 - this.width/this.slidinglength/2);\n\t\tthis.powerup = 0;\t\n\t\tthis.powerupTimer = 0;\t\n\t\tthis.inputTicks = 0;\n\t}\n\n\tupdatePosition(pos) {\n\t\tthis.previousCenterX = this.paddleCenterX;\n\t\tthis.previousCenterY = this.paddleCenterY;\n\t\tthis.position = pos;\n\t\tthis.paddleCenterX = (this.x1*(1-this.position/100) + this.x2*this.position/100);\n\t\tthis.paddleCenterY = (this.y1*(1-this.position/100) + this.y2*this.position/100);\n\t}\n\n\tgetReflection(ball) {\n\n\t\t// First, figure out which edge the ball collided with. \n\t\tlet hitbox = this.getHitbox();\n\t\tlet edge;\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\tedge = [hitbox[i].x, hitbox[i].y, hitbox[(i+1)%4].x, hitbox[(i+1)%4].y];\n\t\t\tif (intersects.circleLine(ball.x,ball.y,ball.radius, ...edge)) break;\n\t\t}\n\t\t// Get a vector parallel to the edge\n\t\tlet edgeVector = {x:edge[2] - edge[0], y: edge[3] - edge[1]}; \n\t\t// Rotate it by 90 degrees\n\t\tlet normalVector = rotateVector(edgeVector, Math.PI/2); \n\n\t\t// Make sure the normal is pointing outwards\n\t\tlet midpoint = {x:(edge[2]+edge[0])/2,y:(edge[3]+edge[1])/2};\n\t\tlet offset = {...midpoint};\n\t\toffset.x += normalVector.x*0.0001;\n\t\toffset.y += normalVector.y*0.0001;\n\n\t\tif (distance2d(this.paddleCenterX,this.paddleCenterY,midpoint.x,midpoint.y) > distance2d(this.paddleCenterX,this.paddleCenterY,offset.x,offset.y)) {\n\t\t\n\t\t\tnormalVector.x *= -1;\n\t\t\tnormalVector.y *= -1;\n\t\t}\n\n\t\t// Normalize the normal lol\n\t\tlet magnitude = Math.sqrt(normalVector.x**2 + normalVector.y**2);\n\t\tnormalVector.x /= magnitude;\n\t\tnormalVector.y /= magnitude;\n\n\t\t\n\t\tlet ref = reflection({x: ball.dx, y: ball.dy}, normalVector, 1.0);\n\t\t\n\t\t// Add the vector from paddle to ball, to increase the ball speed on each hit\n\t\tref.x += (ball.x - this.paddleCenterX)*0.04*(ballInitSpeed/3);\n\t\tref.y += (ball.y - this.paddleCenterY)*0.04*(ballInitSpeed/3);\n\n\t\tlet paddleVelocity = {x: this.paddleCenterX - this.previousCenterX, y: this.paddleCenterY-this.previousCenterY};\n\t\tif (paddleVelocity.x === 0 && paddleVelocity.y === 0) {\n\t\t\treturn ref;\n\t\t}\n\n\n\t\n\n\t\t// Deflect the ball further based on the movvement of the paddle\n\t\tref = rotateVector(ref, angleBetween(ref,paddleVelocity)*0.2)//*Math.sqrt(paddleVelocity.x**2 + paddleVelocity.y**2));\n\t\treturn ref;\n\t}\n\n\tupdate(state,input){\n\t\tif (this.hidden) return;\n\t\tif (input.left || input.right) {\n\t\t\tthis.inputTicks++;\n\t\t} else {\n\t\t\tthis.inputTicks = 1;\n\t\t}\n\n\t\tvar delta = paddleSpeed;\n\t\t\n\t\tif (input.right) {\n\t\t\tthis.position+=delta;\n\t\t}\n\n\t\tif (input.left) {\n\t\t\tthis.position-=delta;\n\t\t}\n\t\n\n\t\t// Stop it from going beyond the limit\n\t\tif (this.position > this.maxPosition) this.position = this.maxPosition;\n\t\tif (this.position < this.minPosition) this.position = this.minPosition;\n\n\t\t// Get x and y position of paddle center\n\n\t\t// Holds the previous coordinates of the paddle in the previous frame\n\t\t// Used to see if the paddle is moving\n\t\tthis.previousCenterX = this.paddleCenterX;\n\t\tthis.previousCenterY = this.paddleCenterY;\n\n\t\tthis.paddleCenterX = (this.x1*(1-this.position/100) + this.x2*this.position/100);\n\t\tthis.paddleCenterY = (this.y1*(1-this.position/100) + this.y2*this.position/100);\n\n\t\t\n\t}\n\n\tdraw(state) {\n\n\t\tthis.paddleCenterX = (this.x1*(1-this.position/100) + this.x2*this.position/100);\n\t\tthis.paddleCenterY = (this.y1*(1-this.position/100) + this.y2*this.position/100);\n\n\t\tif (this.hidden) return;\n\t\tvar ctx = state.context;\n\t\tctx.save();\n\t\tctx.translate(0.5,0.5);\n\t\tctx.strokeStyle = \"#000000\";\n\n\t\tctx.fillStyle = \"#888888\";\n\t\tctx.translate(this.paddleCenterX, this.paddleCenterY);\n\t\tctx.rotate(this.tiltAngle );\n\t\t// Draw paddle with fillRect()\n\t\tctx.fillRect(-this.depth/2,-this.width/2,this.depth,this.width);\n\t\t\n\t\tctx.restore();\n\t}\n\n\t\n\n\tgetHitbox() {\n\n\t\tlet sw = this.width/2;\n\t\tlet sd = this.depth/2;\n\t\tvar points = [\n\t\t\t{x:sd,y:sw},{x:sd,y:-sw},{x:-sd,y:-sw},{x:-sd,y:sw}\n\t\t];\n\n\t\t/*\n\n\t\tOrder of points \n\n\t    3      2\n\t\t +----+\n\t\t |    |\n\t\t |    |\n\t\t |    |\n\t\t |    |\n\t\t +----+\n        4      1\n\t\t*/\n\n\n\t\treturn points.map((e) => {\n\t\t\tlet {x:u,y:v} = rotateVector(e,this.tiltAngle);\n\t\t\n\t\t\treturn {x:u + this.paddleCenterX,y: v + this.paddleCenterY}\n\t\t});\n\t\n\t}\n\n\tgetInnerWall() {\n\t\n\t\tlet offset = rotateVector({\n\t\t\tx: this.depth/2,\n\t\t\ty: 0\n\t\t},this.tiltAngle);\n\t\tif (distance2d(this.x1,this.y1,250,250) < distance2d(this.x1+offset.x, this.y1+offset.y,250,250)) {\n\t\t\t\n\t\t\toffset.x *= -1; offset.y *= -1;\n\t\t}\n\t\treturn {\n\t\t\tx1: this.x1 + offset.x,\n\t\t\ty1: this.y1 + offset.y,\n\t\t\tx2: this.x2 + offset.x,\n\t\t\ty2: this.y2 + offset.y\n\t\t}\n\t\t\n\t}\n}","import { rotateVector } from \"../utils/2d\";\nimport {lerp} from '../utils/math';\nimport { updateRate , updateTime , ballMinSpeed} from \"../utils/constants\";\n\n\nclass Ball {\n\tconstructor(args) {\n        this.x = args.x || 0; \n        this.y = args.y|| 0;\n        this.dx = args.dx || 0;\n        this.dy = args.dy || 0; // changes the direction of movement  1 means up and -1 means down &  left or right \n        this.radius = 10;\n        this.delete = false; // Whether the ball should be deleted in the next frame\n        this.r = 0;\n        this.dr = 0;\n        this.color = args.color||\"#000\";\n        this.prevX = args.x;\n        this.prevY = args.y;\n        this.lastUpdateTime = Date.now();\n\n    }\n\n    draw(state) {\n\n        var currentTime = Date.now(); \n        var timeSinceLastUpdate = currentTime - this.lastUpdateTime;\n        //var {x:renderX,y:renderY} = lerp({x:this.prevX,y:this.prevY},{x:this.x,y:this.y}, timeSinceLastUpdate/updateTime); \n         var renderX = this.x;\n         var renderY = this.y;\n\n\n       \n        var ctx = state.context;\n        ctx.save();\n        ctx.translate(renderX + 0.5,renderY + 0.5);\n        ctx.rotate(this.r);\n\n        if (this.color === 'red') ctx.fillStyle = \"#800\";\n        else if (this.color === 'blue') ctx.fillStyle = \"#008\";\n        else ctx.fillStyle = \"#888\";\n       \n        ctx.beginPath();\n        ctx.arc(0,0,this.radius,this.radius,0,Math.PI*2);\n        ctx.fill();\n        ctx.closePath();\n\n        ctx.restore();\n    }\n\n    update() {\n\n        this.prevX = this.x;\n        this.prevY = this.y;\n\n        this.x += this.dx;\n        this.y += this.dy;\n        if (isNaN(this.dx) ) console.log(this.x);\n        this.r += this.dr;\n        if( Math.sqrt(this.dx ** 2 + this.dy ** 2) < ballMinSpeed ) {\n            this.dx *= 1.2; this.dy *= 1.2;\n        }\n\n        this.lastUpdateTime = Date.now();\n    \n    }\n    \n}\n\nexport default Ball;","import React from 'react'; \n\n\nconst boxStyle = { \n\n    // marginLeft: \"50%\",\n\t// height:20,\n\tdisplay: \"inline-block\",\n\talignItems: \"center\",\n\tjustifyContent: \"center\",\n    textAlign : \"center\",\n    padding : 0,    \n    border :  \"0.1em solid black\",\n    width : 20, \n\n}; \n\n\n\nexport default class Key extends React.Component {   \n\n    render () { \n\n        return ( \n            <div style = {{...boxStyle, background: this.props.color, color: \"white\"}}>\n            \n            {this.props.content}\n            </div>\n        );\n\n\n       // return ({Instruction});\n    }\n}\n\n","import React from 'react';\nimport {Button} from 'react-bootstrap';\nimport Key from './Instructions.js';\n\nconst dropDown = {\n\tposition: \"fixed\",\n\tbottom:0,\n\tleft: 0\n}\n\nconst dropDownContent= {\n \nposition: \"absolute\",\n  left:10,bottom:50,\n\n  width:300,\n  minHeight:150,\n  border:\"2px solid blue\",\n  background: \"\t#00FF00\",\n\tzIndex: \"1\",\n}\n\n\n\n\nconst buttonStyle = {\n\twidth:\"100px\",\n\tpadding:\"2px\",\n\tborder:\"2px solid blue\",\n\tmargin:\"2px\",\n\ttextAlign: \"center\",\n\tfontSize : 15,\n\tborderRadius:\"2\",\n\tuserSelect:\"none\",\n\tposition: \"\",\n\t\n\n}\n\n\n\n\nconst mainStyle = {\n\theight:50,\n\twidth:100,\n\tmargin:\"auto\",\n\tpadding:10,\n\tfloat : \"center\"\n}\n\nconst leftStyle = {\n\twidth: \"50%\",\n\theight: 50,\n\tfloat: \"left\",\n\tdisplay: \"flex\",\n\talignItems: \"center\",\n\tjustifyContent: \"center\",\n\tboxShadow:\"0px 0px 0px 11px red inset\",\n\t\n\n}\n\nconst leftNumberStyle = {\n\tmargin : 0,\n\theight: 20,\n\tfloat: \"left\",\n\tdisplay: \"flex\",\n\talignItems: \"center\",\n\tjustifyContent: \"center\",\n\n}\n\nconst rightStyle = {\n\tmarginLeft: \"50%\",\n\theight:50,\n\tdisplay: \"flex\",\n\talignItems: \"center\",\n\tjustifyContent: \"center\",\n\tboxShadow:\"0px 0px 0px 11px blue inset\"\n}\n\n\n\nconst rightNumberStyle = {\n\tmargin : 10,\n\theight:20,\n\tdisplay: \"flex\",\n\talignItems: \"center\",\n\tjustifyContent: \"right\",\n\t// boxShadow:\"0px 0px 0px 10px blue inset\",\n\tfloat : \"center\"\n}\n\nconst pauseButton = {\n\tmargin:\"auto\",\n\theight:\"30px\",\n\twidth:\"30px\",\n\n}\n\n// const instructions = { \n// \tmargin : \"auto\",\n// \theight:40,\n// \twidth: 400,\n// \tpadding:40,\n// \talignItems: \"left\",\n// \tjustifyContent: \"left\",\n// \tfloat: \"left\",\n\n// }\n\n\n\nexport class Scoreboard extends React.Component {\n\n\tstate = { display : false}\n\n\thandleOnClick = () => { \n\t\tthis.setState((state) => ({display: !state.display}));\n\t\t// return (\n\t\t// \t<div>\n\t\t// \t{userInfo}\n\t\t// \t</div>\n\t\t// );\n\t}\n\n\n\trender() {\n\n\n\t\t\n\n\n\t\tconst userInfo = (\n\n\t\t\t<div style = { dropDownContent}>\n\t\t\t\n\t\t\t<h2 align = \"centre\">{'\tControls '}</h2>\n\t\t\t\t\t\n\t\t\t\t\t<div align = \"left\">\n\t\t\t\t\t<span style = { {display : \"inline-block\" , float : \" centre\" , margin : 10}}>\n\t\t\t\t\t<div >\n\t\t\t\t\t\tRed 1 \n\t\t\t\t\t</div>\n\t\t\t\t\t\t<span style = {leftNumberStyle}>\n\t\t\t\t\t\t<Key  content = \"1\" color = \"red\"/>   \n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<span style = {rightNumberStyle}>\n\t\t\t\t\t\t<Key  content = \"2\" color = \"red\"/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t\n\t\t\t\t\t<span style = { {display : \"inline-block\" , float : \" centre\", margin : 10}}>\n\t\t\t\t\t<div >\n\t\t\t\t\t\t Red 2 \n\t\t\t\t\t</div>\n\t\t\t\t\t\t<span style = {leftNumberStyle}>\n\t\t\t\t\t\t<Key  content = \"S\" color = \"red\"/>   \n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<span style = {rightNumberStyle}>\n\t\t\t\t\t\t<Key  content = \"D\" color = \"red\"/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\n\n\t\t\t\t\t<span style = { {display : \"inline-block\" , float : \" centre\" , margin  : 10}}>\n\t\t\t\t\t<div >\n\t\t\t\t\t\t Red 3 \n\t\t\t\t\t</div>\n\t\t\t\t\t\t<span style = {leftNumberStyle}>\n\t\t\t\t\t\t<Key  content = \"V\" color = \"red\"/>   \n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<span style = {rightNumberStyle}>\n\t\t\t\t\t\t<Key  content = \"B\" color = \"red\"/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span style = { {display : \"inline-block\" , float : \" centre\" , margin  : 10}}>\n\t\t\t\t\t\n\t\t\t\t\t</span>\n\n\n\n\t\t\t\t\t\n\n\t\t\t\t\n\n\t\t\t\t\t<span style = { {display : \"inline-block\" , float : \" centre\", margin : 10}}>\n\t\t\t\t\t<div >\n\t\t\t\t\t\t Blue 1  \n\t\t\t\t\t</div>\n\t\t\t\t\t\t<span style = {leftNumberStyle}>\n\t\t\t\t\t\t<Key  color = \"blue\" content = \"-\"/>   \n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<span style = {rightNumberStyle}>\n\t\t\t\t\t\t<Key  content = \"=\" color = \"blue\"/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span style = { {display : \"inline-block\" , float : \" centre\", margin : 10}}>\n\t\t\t\t\t<div >\n\t\t\t\t\t\t Blue 2  \n\t\t\t\t\t</div>\n\t\t\t\t\t\t<span style = {leftNumberStyle}>\n\t\t\t\t\t\t<Key  content = \"L\" color = \"blue\"/>   \n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<span style = {rightNumberStyle}>\n\t\t\t\t\t\t<Key  content = \";\" color = \"blue\"/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\n\n\t\t\t\t\t<span style = { {display : \"inline-block\" , float : \" centre\", margin : 10}}>\n\t\t\t\t\t<div >\n\t\t\t\t\t\t Blue 3 \n\t\t\t\t\t</div>\n\t\t\t\t\t\t<span style = {leftNumberStyle}>\n\t\t\t\t\t\t<Key  content = \"N\" color = \"blue\"/>   \n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<span style = {rightNumberStyle}>\n\t\t\t\t\t\t<Key  content = \"M\" color = \"blue\"/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\n\n\t\t\t\t\n\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\tTo play, select your desired settings, and press one of the reset buttons to choose the number of players. Controls are shown above.\n\t\t\t\t\t</div><hr/>\n\t\t\t\t\t<div>\n\t\t\t\t\t\tIn a 1v1 game, the players playing are Red 1 and Blue 1. For 2v2, it's Red 1 and Red 2 vs Blue 1 and Blue 2. Similar for 3v3\n\t\t\t\t\t</div><hr/>\n\t\t\t\t\t<div>\n\t\t\t\t\t\tWhen playing with powerups, hit the ball over a green square to collect a powerup. Press '3' for Red team or '0' for blue team to use the powerup\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr/>\n\t\t\t\t\t<div>\n\n\t\t\t\t\t</div>\n\t\t\t </div>\n\t\t\t\n\t\t\t );\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div style = {mainStyle}>\n\t\t\t\t\t<div id = \"red\" style = {leftStyle}>{this.props.redScore}</div>\n\t\t\t\t\t<div id = \"blue\" style = {rightStyle}>{this.props.blueScore}</div>\n\t\t\t\t</div>\n\t\t\t\n\n\t\t\t\t<div style = {dropDown} >\n\t\t\t\t{this.state.display? userInfo:\"\"}\t\n\t\t\t\t<div>\n\t\t\t\t\t<Button style = {buttonStyle} variant = \"primary\" onClick = {this.handleOnClick}>\n\t\t\t\t\t\tInstructions\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import { rotateVector ,distance2d, reflection} from \"../utils/2d\";\r\n\r\n\r\n\r\n\r\nexport class Wall {\r\n\r\n\tconstructor(args) {\r\n\t\tthis.x1 = args.x1;\r\n\t\tthis.y1 = args.y1;\r\n\t\tthis.x2 = args.x2;\r\n\t\tthis.y2 = args.y2;\r\n\r\n\t}\r\n\r\n\tgetReflection(ball) {\r\n\t\tlet parallelVector = {x: this.x2-this.x1, y: this.y2-this.y1};\r\n\t\tlet normalVector = rotateVector(parallelVector, Math.PI/2);\r\n\r\n\t\t// Make sure normalVector is pointing inward\r\n\t\tlet midpoint = {x: (this.x1+this.x2)/2, y: (this.y1+this.y2)/2};\r\n\t\tlet offset = {...midpoint};\r\n\t\toffset.x += normalVector.x*0.001;\r\n\t\toffset.y += normalVector.y*0.001;\r\n\r\n\t\tif (distance2d(ball.x,ball.y,midpoint.x,midpoint.y) < distance2d(ball.x,ball.y,offset.x,offset.y)) {\r\n\t\t\r\n\t\t\tnormalVector.x *= -1;\r\n\t\t\tnormalVector.y *= -1;\r\n\t\t}\r\n\r\n\t\t// Normalize the normal lol\r\n\t\tlet magnitude = Math.sqrt(normalVector.x**2 + normalVector.y**2);\r\n\t\tnormalVector.x /= magnitude;\r\n\t\tnormalVector.y /= magnitude;\r\n\t\t\r\n\r\n\t\treturn reflection({x:ball.dx, y:ball.dy}, normalVector,1.0);\r\n\r\n\t}\r\n\r\n\tdraw(state) {\r\n\t\tvar ctx  = state.context;\r\n\r\n\t\tctx.save();\r\n\t\tctx.strokeStyle = \"#000\";\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(this.x1,this.y1);\r\n\t\tctx.lineTo(this.x2,this.y2);\r\n\t\tctx.stroke();\r\n\t\tctx.restore();\r\n\t}\r\n}","export class Goal {\r\n\tconstructor(args) {\r\n\t\tthis.x1 = args.x1;\r\n\t\tthis.y1 = args.y1;\r\n\t\tthis.x2 = args.x2;\r\n\t\tthis.y2 = args.y2;\r\n\r\n\t\tthis.color = args.color || \"red\";\r\n\t\tthis.teamId = args.teamId || 0;\t\r\n\t}\r\n\r\n\tdraw(state) {\r\n\t\tvar ctx  = state.context;\r\n\t\tctx.save();\r\n\t\tctx.strokeStyle = this.color;\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(this.x1,this.y1);\r\n\t\tctx.lineTo(this.x2,this.y2);\r\n\t\tctx.stroke();\r\n\t\tctx.restore();\r\n\t}\r\n\r\n\trender(state) {\r\n\t\tvar ctx  = state.context;\r\n\t\tctx.save();\r\n\t\tctx.strokeStyle = this.color;\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(this.x1,this.y1);\r\n\t\tctx.lineTo(this.x2,this.y2);\r\n\t\tctx.stroke();\r\n\t\tctx.restore();\r\n\t}\r\n}","import React from 'react';\n\nconst dropdown = {\n\tposition: \"fixed\",\n\t\n\n\tbottom:0,\n\tright: 0\n\n}\n\nconst categoryHeader = {\n\tbackground: \"#AAAAFF\",\n\twidth:\"90%\",\n\tmargin:\"auto\",\n\tmarginTop:\"2px\",\n}\n\nconst dropdownContent= {\n \n  \tposition: \"absolute\",\n\tright:10,bottom:30,\n\n\twidth:300,\n\tminHeight:150,\n\tborder:\"2px solid blue\",\n\tbackground: \"#8888ff\",\n\t\n\n  \tzIndex: \"1\",\n}\n\nconst buttonStyle = {\n\twidth:\"100px\",\n\tpadding:\"2px\",\n\tborder:\"2px solid blue\",\n\tmargin:\"2px\",\n\ttextAlign: \"center\",\n\tborderRadius:\"2\",\n\tuserSelect:\"none\",\n\tposition: \"fixed\",\n\tbottom:0,\n\tright: 0,\n\tfontSize : 15\n\n\n}\n\nexport default class Settings extends React.Component {\n\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\topened:false,\n\t\t}\n\n\t\tthis.toggleDropdown = this.toggleDropdown.bind(this);\n\t\tthis.AICheckboxChange = this.AICheckboxChange.bind(this);\n\t\tthis.curveballChange = this.curveballChange.bind(this);\n\t\tthis.powerupsChange = this.powerupsChange.bind(this);\n\t\tthis.accelChange = this.accelChange.bind(this);\n\t\tthis.trailChange = this.trailChange.bind(this);\n\t\n\t}\n\n\ttoggleDropdown() {\n\t\n\t\tthis.setState((state) => ({opened: !state.opened}));\n\t}\n\n\tAICheckboxChange(e) {\n\t\tlet newSettings = this.props.settings;\n\t\tnewSettings.AI[e.target.id] = !newSettings.AI[e.target.id];\n\t\tthis.props.changeHandler(newSettings);\n\t}\n\tcurveballChange(e) {\n\t\tlet newSettings = this.props.settings;\n\t\tnewSettings.curveball = e.target.checked;\n\t\tthis.props.changeHandler(newSettings);\n\t}\n\tpowerupsChange(e) {\n\t\tlet newSettings = this.props.settings;\n\t\tnewSettings.powerups = e.target.checked;\n\t\tthis.props.changeHandler(newSettings);\n\t}\n\taccelChange(e) {\n\t\tlet newSettings = this.props.settings;\n\t\tnewSettings.accel = e.target.checked;\n\t\tthis.props.changeHandler(newSettings);\n\t}\n\ttrailChange(e) {\n\t\tlet newSettings = this.props.settings;\n\t\tnewSettings.trail = e.target.checked;\n\t\tthis.props.changeHandler(newSettings);\n\t}\n\n\trender() {\n\n\n\n\n\t\tvar trailCheckbox = <input type = \"checkbox\" checked = {this.props.settings.trail} onChange = {this.trailChange}></input>\n\n\t\tconst content = (\n\t\t\t<div style = {dropdownContent}>\n\t\t\t\n\n\t\t\t\t<div style = {categoryHeader}>\n\t\t\t\t\t<div style = {{fontSize:\"16px\"}}>Graphics Settings</div>\n\t\t\t\t\t<div>Ball Trail {trailCheckbox}</div>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\n\n\t\treturn(\n\t\t\t<div style = {dropdown}>\n\t\t\t\t{this.state.opened? content:\"\"}\n\t\t\t\t<button style = {buttonStyle} onClick = {this.toggleDropdown}>Settings {this.state.opened? \"\":\"\"} </button>\n\t\t\t\t\n\t\t\t</div>\n\t\t)\n\t}\n}","\r\nexport class Particle {\r\n\tconstructor(args) {\r\n\t\tthis.x = args.x;\r\n\t\tthis.y = args.y;\r\n\t\tthis.lifetime = 40;\r\n\t\tthis.delete = false;\r\n\t\tthis.color = args.color || \"#888\";\r\n\t}\r\n\r\n\tdraw(state) {\r\n\t\t\r\n\t\tvar ctx = state.context;\r\n\t\tctx.fillStyle = this.color;\r\n\t\tctx.beginPath();\r\n\t\t//ctx.arc(this.x, this.y, this.lifetime/20, 0 , Math.PI*2);\r\n\t\tvar edgeLength = this.lifetime/10;\r\n\t\tctx.fillRect(this.x-edgeLength/2, this.y-edgeLength/2,edgeLength,edgeLength);\r\n\t\tctx.fill();\r\n\t\tctx.closePath();\r\n\r\n\t\t\r\n\t}\r\n\r\n\tupdate() {\r\n\t\t\r\n\t\tthis.lifetime--;\r\n\t\t\tif (this.lifetime <= 0) {\r\n\t\t\tthis.delete = true;\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n}","export class PlayerCard {\r\n\tconstructor(args) {\r\n\t\tthis.playerName = args.playerName || \"Untitled\";\r\n\t\tthis.color = args.color || \"red\";\r\n\t\tthis.left = args.left; this.right = args.right;\r\n\t\tthis.x = args.x; this.y = args.y; // center of\r\n\r\n\t}\r\n\r\n\tdraw(state) {\r\n\t\tconst ctx = state.context;\r\n\r\n\t\tctx.textBaseline = \"top\"; \r\n\t\tctx.font = \"14px sans-serif\";\r\n\t\tvar boxwidth = ctx.measureText(this.playerName).width + 4;\r\n\t\tif (boxwidth < 42) boxwidth = 42;\t\r\n\t\tlet x = this.x - boxwidth/2;\r\n\t\tlet y = this.y - 17; \r\n\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(x, y, boxwidth, 34);\r\n\t\tctx.strokeStyle = (this.color === \"red\"? \"red\":\"blue\");\r\n\t\tctx.stroke();\r\n\t\tctx.fillStyle = (this.color === \"red\"? \"#f88\":\"#88f\"); ctx.fill();\r\n\t\tctx.fillStyle = \"black\";\r\n\t\tctx.strokeStyle = \"black\";\r\n\t\tctx.fillText(this.playerName, x + 2,y + 2);\r\n\t\tctx.closePath();\r\n\t\tctx.font = \"14px Courier New\";\r\n\t\r\n\t\t\t\r\n\t\t\t\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(x + 7, y + 18) // 2 + 14 + 2\r\n\t\tctx.lineTo(x + 2, y + 18 + 7);\r\n\t\tctx.lineTo(x + 7, y + 18+14);\r\n\t\tctx.fill();\r\n\t\t\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(x + 35, y + 18);\r\n\t\tctx.lineTo(x + 40, y + 18 + 7);\r\n\t\tctx.lineTo(x + 35, y + 18+14);\r\n\t\tctx.fill();\r\n\t\tctx.fillText(this.left,x + 9, y + 18);\r\n\t\tctx.fillText(this.right,x + 24, y + 18);\r\n\t\t\r\n\t\r\n\t\r\n\t\t\r\n\r\n\t}\r\n}","import React from 'react';\r\nconst GameState = {\r\n\tNOT_QUEUEING:0,\r\n\tQUEUEING:1,\r\n\tPRE_MATCH:2,\r\n\tRUNNING:3,\r\n\tGOAL_SCORED:4,\r\n\tPOST_MATCH:5,\r\n}\r\n\r\nexport class QueueBox extends React.Component {\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\t\r\n\t}\r\n\r\n\r\n\trender() {\r\n\r\n\t\tvar buttonText;\r\n\t\tswitch(this.props.gameState) {\r\n\t\t\tcase GameState.NOT_QUEUEING: buttonText = \"Queue\"; break;\r\n\t\t\tcase GameState.QUEUEING: buttonText = \"Queueing\"; break;\r\n\t\t\tdefault: buttonText = \"In Game\"; break;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\tChoose a username: <input type=\"text\" value = {this.props.handle} onChange = {(e) => this.props.handleChangeHandler(e.target.value)}/>\r\n\t\t\t\t<button onClick = {() => {\r\n\t\t\t\t\tconsole.log(\"Queue clicked\");\r\n\t\t\t\t\tif (this.props.gameState === GameState.NOT_QUEUEING) {\r\n\t\t\t\t\t\tthis.props.gameStateChangeHandler(GameState.QUEUEING);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}}>{buttonText}</button>\r\n\t\t\t</div>\r\n\r\n\t\t)\r\n\t}\r\n\r\n}","import openSocket from 'socket.io-client';\r\nconst socket = openSocket('http://139.162.22.70:8000', {secure:true});\r\n//const socket = openSocket('https://localhost:8000' , {secure:true});\r\n\r\nconst PacketType = {\r\n\tPOSITION:0,\r\n\tSTATE:1\r\n}\r\n\r\nconst GameState = {\r\n\tNOT_QUEUEING:0,\r\n\tQUEUEING:1,\r\n\tPRE_MATCH:2,\r\n\tRUNNING:3,\r\n\tGOAL_SCORED:4,\r\n\tPOST_MATCH:5,\r\n}\r\n\r\n\r\nexport function subscribe(matchCb,stateUpdate,posUpdate,overCb) {\r\n\r\n\r\n\tsocket.on('match',(data) => {\r\n\t\tmatchCb(data)\r\n\t\tconsole.log(\"match started\",data);\r\n\t})\r\n\r\n\tsocket.on('gameUpdate', (data) => {\r\n\t\tif (data.type === PacketType.STATE) {\r\n\t\t\tstateUpdate(data);\r\n\t\t} else if (data.type === PacketType.POSITION) {\r\n\t\t\tposUpdate(data);\r\n\t\t}\r\n\t})\r\n\r\n\tsocket.on('gameOver', (data) => {\r\n\t\toverCb(data);\r\n\t})\r\n\r\n\t\r\n\r\n}\r\n\r\nlet time = Date.now();\r\n\r\nexport function sendInput(data) {\r\n\t// console.log(\"Sending FPS\", 1000/(Date.now() - time));\r\n\t// time = Date.now();\r\n\tsocket.emit('input',data);\r\n\r\n}\t\r\n\r\nexport function queue(handle,cb) {\r\n\tsocket.emit('queueing', handle);\r\n\tsocket.on(\"queueingAck\",cb);\r\n}\r\n\r\n\r\n","import React, {Component} from 'react';\nimport InputManager from './InputManager'; // InputManager is a class handling all keyboard inputs\nimport './App.css';\nimport Paddle from './gameObjects/Paddle';\nimport Ball from './gameObjects/Ball';\nimport { Scoreboard } from './components/Scoreboard';\nimport { Wall } from './gameObjects/Wall';\nimport { Goal } from './gameObjects/Goal';\nimport intersects from 'intersects';\nimport { rotateVector } from './utils/2d';\nimport { randomBetween } from './utils/math';\nimport Settings from './components/Settings';\nimport { Particle } from './gameObjects/Particle';\nimport {PlayerCard} from './gameObjects/PlayerCard'\nimport {updateRate, ballInitSpeed} from './utils/constants';\nimport { QueueBox } from './components/QueueBox';\nimport * as api from './api';\nimport { isNumber } from 'util';\n\n\n\nconst backgroundStyling = { \n\tbackgroundColor : \"\t#fff\"\n}\n\nconst PacketType = {\n\tPOSITION:0,\n\tSTATE:1\n}\n\nconst GameState = {\n\tNOT_QUEUEING:0,\n\tQUEUEING:1,\n\tPRE_MATCH:2,\n\tRUNNING:3,\n\tGOAL_SCORED:4,\n\tPOST_MATCH:5,\n}\n\n\nconst Teams = {\n\tRED:0,\n\tBLUE:1,\n}\n\nvar animationFrameId;\nvar goalText;\nvar goalTextStyle;\nvar tickTock = false;\n// The main component that contains the canvas, and other buttons if needed\nclass App extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tinput: new InputManager(), // TODO UPDATE This for single player\n\t\t\tcontext: null, // the canvas context,\n\t\t\tgameState: GameState.NOT_QUEUEING,\n\t\t\tredScore:0,\n\t\t\tblueScore:0,\n\t\t\tredHandle:\"Red 1\",\n\t\t\tblueHandle:\"Blue 1\",\n\t\t\tsettings: {\n\t\t\t\ttrail:true,\n\t\t\t},\n\t\t\thandle:\"\"\n\n\t\t}\n\n\t\n\t\tthis.reset1v1 = this.reset1v1.bind(this);\n\t\tthis.resetPositions = this.resetPositions.bind(this);\n\t\tthis.updatePaddles = this.updatePaddles.bind(this);\n\t\tthis.changeSettings = this.changeSettings.bind(this);\n\t\tthis.createParticle = this.createParticle.bind(this);\n\t\tthis.sendInput = this.sendInput.bind(this);\n\t\tthis.update = this.update.bind(this);\n\t\tthis.draw = this.draw.bind(this);\n\t\tthis.changeGameState = this.changeGameState.bind(this);\n\t\tthis.changeHandle = this.changeHandle.bind(this);\n\t\tthis.stateUpdate = this.stateUpdate.bind(this);\n\t\tthis.posUpdate = this.posUpdate.bind(this);\n\t\tthis.winningTeam = \"\";\n\t\tthis.tickCounter = 0;\n\t\tthis.cutsceneCounter = 0;\n\t\tthis.gameId = -1;\n\t\tthis.ourPlayer = -1;\n\t\tthis.prevInput = {left:false,right:false};\n\t\t\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.state.input.bindKeys();\n\t\t\n\t\tconst context = this.refs.canvas.getContext('2d'); // This is to get context\n\t\tthis.setState({context:context});\t\t\n\t\tthis.reset1v1();\n\t\tanimationFrameId = requestAnimationFrame(this.draw); \n\t\tsetInterval(this.update, 1000/updateRate);\n\t\tapi.subscribe(this.matchFound.bind(this),this.stateUpdate,this.posUpdate,this.gameOver.bind(this));\n\n\t}\n\n\n\n\treset1v1() {\n\t\t//this.setState({redScore:0,blueScore:0,gameState:GameState.RUNNING});\n\t\tthis.particles = []; \n\t\tthis.tickCounter = 0;\n\t\t\n\t\tthis.walls = [\n\t\t\tnew Wall({x1:0,y1:100,x2:500,y2:100}),\n\t\t\tnew Wall({x1:0,y1:399,x2:500,y2:399}),\n\t\t];\n\t\tthis.goals = [\n\t\t\tnew Goal({x1:0,y1:100,x2:0,y2:400,color:\"red\",teamId:Teams.RED}),\n\t\t\tnew Goal({x1:499,y1:100,x2:499,y2:400,color:\"blue\",teamId:Teams.BLUE}),\n\t\t];\n\t\tthis.paddles = [\n\t\t\tnew Paddle({x1:10, y1:100, x2:10, y2:400,color:\"red\"}),\n\t\t\tnew Paddle({x1:490,y1:400,x2:490,y2:100,color:\"blue\"}),\n\t\t]\n\t\tthis.playerCards = [\n\t\t\tnew PlayerCard({playerName:this.state.redHandle, color:\"red\", x:25, y:50,left:\"v\", right:\"b\"}),\n\t\t\tnew PlayerCard({playerName:this.state.blueHandle,color:\"blue\", x:475,y:50,left:'-',right:\"=\"})\n\t\t]\n\t\t\n\t\t\n\t\tthis.ball = new Ball({x:250, y: 250,});\n\t\tthis.resetPositions();\n\t}\n\n\n\tstateUpdate(packet) {\n\t\tswitch(packet.state) {\n\t\t\tcase GameState.PRE_MATCH:\n\t\t\t\tthis.cutsceneCounter = 360;\n\t\t\t\tthis.setState({gameState:GameState.PRE_MATCH});\n\t\t\t\tbreak;\n\n\t\t\tcase GameState.RUNNING:\n\t\t\t\tthis.cutsceneCounter = 0;\n\t\t\t\tthis.setState({gameState:GameState.RUNNING});\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase GameState.GOAL_SCORED:\n\t\t\t\tthis.cutsceneCounter = 180;\n\t\t\t\tthis.setState({gameState:GameState.GOAL_SCORED, redScore:packet.redScore, blueScore:packet.blueScore});\n\t\t\t\tgoalText = (packet.scorer === 0? this.state.redHandle:this.state.blueHandle)+ \" has scored\";\n\t\t\t\tgoalTextStyle = (packet.scorer === 0? \"red\":\"blue\");\n\t\t\t\tthis.tickCounter = packet.tickCounter;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"INVALID PACKET\");\n\t\t}\n\t}\n\n\tposUpdate(packet) {\n\n\t\tif(this.state.gameState !== GameState.RUNNING) return;\n\t\tlet tickDiff = this.tickCounter - packet.frame;\n\n\t\tlet tempBall = new Ball({...packet.ball});\n\t\t//console.log(tempBall);\n\t\tthis.ball.x = tempBall.x; this.ball.y = tempBall.y;\n\t\tthis.ball.dx = tempBall.dx; this.ball.dy = tempBall.dy;\n\t\tthis.ball.color = tempBall.color;\n\n\t\t\n\n\t\tfor (let i = 0; i < 2; i++) {\n\t\t\tthis.paddles[i].updatePosition(packet.paddlePos[i]);\n\t\t}\t\n\t\treturn;\n\n\t\t// Predict position of ball after tickDiff frames\n\t\tfor (let i = 0; i < tickDiff; i++) {\n\n\t\t\tthis.paddles.forEach(paddle => {\n\t\t\t\t// The below statement is to convert an array of objects {x,y} to array of numbers  \n\t\t\t\tlet hitbox = paddle.getHitbox();\n\t\t\t\tlet hitboxArr = [];\n\t\t\t\thitbox.forEach(e => {\n\t\t\t\t\thitboxArr.push(e.x);\n\t\t\t\t\thitboxArr.push(e.y);\n\t\t\t\t})\n\t\n\t\t\t\t// Now hitboxArr contains the points in correct format [x1,y1,x2,y2...]\n\t\t\t\tif (intersects.circlePolygon(tempBall.x, tempBall.y,tempBall.radius,hitboxArr)) {\n\t\t\t\t\tlet newVelocity = paddle.getReflection(tempBall,this.state.settings.curveball);\n\t\t\t\t\ttempBall.dx = newVelocity.x;\n\t\t\t\t\ttempBall.dy = newVelocity.y;\n\t\t\t\t\ttempBall.x += tempBall.dx; tempBall.y += tempBall.dy;\n\t\t\t\t\ttempBall.color = paddle.color;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\n\t\t\t// Collision between ball and walls\n\t\t\tthis.walls.forEach(wall => {\n\t\t\t\tif (intersects.circleLine(tempBall.x, tempBall.y, tempBall.radius, wall.x1, wall.y1, wall.x2, wall.y2)) {\n\t\t\t\t\tlet newVelocity = wall.getReflection(tempBall);\n\t\t\t\t\ttempBall.dx = newVelocity.x;\n\t\t\t\t\ttempBall.dy = newVelocity.y;\n\t\t\t\t}\n\t\t\t})\n\t\n\t\t\ttempBall.update();\n\t\t}\n\n\t\tthis.ball.x = tempBall.x; this.ball.y = tempBall.y;\n\t\tthis.ball.dx = tempBall.delete; this.ball.dy = tempBall.dy;\n\t\tthis.ball.color = tempBall.color;\n\t}\n\n\tresetPositions() {\n\t\tthis.particles = [];\n\t\t// let randomAngle = randomBetween(-Math.PI/4,Math.PI/4);\n\t\t// let initialBallVelocity = rotateVector({x:ballInitSpeed,y:0},randomAngle);\n\n\t\t// // Make the ball go either right or left with 50:50 chance\n\t\t// if (Math.random() < 0.5) { \n\t\t// \tinitialBallVelocity.x *= -1;\n\t\t// \tinitialBallVelocity.y *= -1;\n\t\t// }\n\t\tthis.ball = new Ball({x: 250, y: 250,dx:0,dy:0});\n\t\tthis.paddles.forEach(paddle => {\n\t\t\tpaddle.position = 50;\n\t\t})\n\t}\n\n\tupdatePaddles() {\n\t\tif (this.ourPlayer === -1) return;\n\t\tlet keys = this.state.input.pressedKeys;\n\t\tthis.paddles[this.ourPlayer].update(this.state,keys);\n\t\t\n\t}\n\n\tcreateParticle(args) {\n\t\tif (this.state.settings.trail)\n\t\t\tthis.particles.push(new Particle(args));\n\t}\n\n\n\n\t\n\n\n\tupdate() {\n\n\t\tif (this.state.gameState === GameState.NOT_QUEUEING || this.state.gameState === GameState.QUEUEING) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.state.gameState === GameState.PRE_MATCH || this.state.gameState === GameState.GOAL_SCORED) {\n\t\t\tthis.cutsceneCounter--;\n\t\t\tif (this.cutsceneCounter === 0) {\n\n\t\t\t\tif (this.state.gameState === GameState.GOAL_SCORED && (this.state.redScore === 5 || this.state.blueScore === 5)) {\n\t\t\t\t\t\n\t\t\t\t\tthis.winningTeam = (this.state.redScore > this.state.blueScore ? \"Red \":\"Blue\");\n\n\t\t\t\t\tthis.resetPositions();\n\t\t\t\t\tthis.setState({gameState:GameState.POST_MATCH});\n\t\t\t\t\tthis.cutsceneCounter = 180;\n\t\t\t\t} else {\n\t\t\t\t\tthis.setState({gameState:GameState.RUNNING});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t\n\t\t}\n\n\t\tif (this.state.gameState === GameState.POST_MATCH) {\n\t\t\tthis.cutsceneCounter--;\n\t\t\tif (this.cutsceneCounter === 0) {\n\t\t\t\tthis.setState({gameState:GameState.NOT_QUEUEING});\n\t\t\t}\n\t\t}\n\n\t\tif (this.state.gameState === GameState.RUNNING) {\n\t\t\tthis.tickCounter++;\n\t\t}\n\n\n\t\t// Creating new particles\n\t\tif(this.tickCounter % 2 === 0) {\n\t\t\twhile (this.particles[0] && this.particles[0].delete) {\n\t\t\t\tthis.particles.shift();\n\t\t\t}\n\t\t\tthis.particles.forEach(particle => particle.update())\n\t\t\tthis.createParticle({x:this.ball.x, y:this.ball.y, color:this.ball.color})\n\t\t}\n\n\n\t\t\n\t\tthis.paddles.forEach(paddle => {\n\t\t\t// The below statement is to convert an array of objects {x,y} to array of numbers  \n\t\t\tlet hitbox = paddle.getHitbox();\n\t\t\tlet hitboxArr = [];\n\t\t\thitbox.forEach(e => {\n\t\t\t\thitboxArr.push(e.x);\n\t\t\t\thitboxArr.push(e.y);\n\t\t\t})\n\n\t\t\t// Now hitboxArr contains the points in correct format [x1,y1,x2,y2...]\n\t\t\tif (intersects.circlePolygon(this.ball.x, this.ball.y,this.ball.radius,hitboxArr)) {\n\t\t\t\tlet newVelocity = paddle.getReflection(this.ball);\n\t\t\t\tthis.ball.dx = newVelocity.x;\n\t\t\t\tthis.ball.dy = newVelocity.y;\n\t\t\t\tthis.ball.x += this.ball.dx; this.ball.y += this.ball.dy;\n\t\t\t\tthis.createParticle((({x,y}) => ({x,y}))(this.ball))\n\t\t\t\tthis.ball.color = paddle.color;\n\t\t\t}\n\t\t\t\n\t\t})\n\n\t\t// Collision between ball and walls\n\t\tthis.walls.forEach(wall => {\n\t\t\tif (intersects.circleLine(this.ball.x, this.ball.y, this.ball.radius, wall.x1, wall.y1, wall.x2, wall.y2)) {\n\t\t\t\tlet newVelocity = wall.getReflection(this.ball);\n\t\t\t\tthis.ball.dx = newVelocity.x;\n\t\t\t\tthis.ball.dy = newVelocity.y;\n\t\t\t}\n\t\t})\n\n\t\n\t\n\t\tthis.ball.update(this.state);\n\n\t\tthis.updatePaddles();\n\n\t\t// Dont detect collision with goal. That is server's job\n\n\t\tthis.sendInput(this.state.input.pressedKeys);\n\t\t\n\t}\n\n\tdraw() {\n\t\n\t\n\t\tconst ctx = this.state.context;\n\t\tif (this.state.gameState === GameState.GOAL_SCORED) {\n\t\t\t\n\t\t\tctx.font = \"30px Courier New\";\n\t\t\tctx.fillStyle = goalTextStyle;\n\t\t\tctx.fillText(goalText,80,250);\n\t\t\tanimationFrameId = requestAnimationFrame(this.draw);\n\t\t\treturn;\n\t\t}\n\n\t\t\n\n\n\t\tctx.save();\n\t\tctx.fillStyle = \"#FFF\";\n\t\tctx.translate(0.5,0.5);\n\t\tctx.fillRect(0,0,500,500); // Erase the previous contents with this\n\n\n\n\t\tif (this.state.gameState === GameState.PRE_MATCH) {\n\t\t\t\n\t\t\tctx.font = \"30px Courier New\";\n\t\t\tctx.fillStyle = \"#000\";\n\t\t\tctx.fillText(\"First to 5\",150,220);\n\t\t\tctx.fillText(\"Good Luck!\",150,290);\n\n\n\n\n\t\t}\n\t\tif (this.state.gameState === GameState.POST_MATCH) {\n\t\t\tctx.font = \"30px Courier New\";\n\t\t\tctx.fillStyle = \"#000\";\n\t\t\tvar postGameText = this.winningTeam + \" Team Wins!\";\n\t\t\tctx.fillText(postGameText,120,220);\n\t\t}\n\n\n\t\tthis.walls.forEach(wall => wall.draw(this.state));\n\t\tthis.goals.forEach(goal => \tgoal.draw(this.state));\n\t\tthis.playerCards.forEach(card => card.draw(this.state));\n\t\tthis.particles.forEach(p => p.draw(this.state));\n\n\t\t\n\t\n\t\tthis.paddles.forEach(p => p.draw(this.state));\n\t\t\n\t\t\n\t\t\n\t\t//if (isNaN(this.ball.x)) console.log(this.ball.x);\n\t\tthis.ball.draw(this.state);\n\n\n\t\tctx.restore();\n\t\tanimationFrameId = requestAnimationFrame(this.draw);\n\t}\n\n\tsendInput(keys) {\n\n\t\tif (keys.left === this.prevInput.left && keys.right === this.prevInput.right) {\n\t\t\t//return;\n\t\t} \n\t\t\n\t\tthis.prevInput.left = keys.left;\n\t\tthis.prevInput.right = keys.right;\n\t\tapi.sendInput({keys,tick:this.tickCounter,ourPlayer:this.ourPlayer,gameId:this.gameId});\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.state.input.unbindKeys();\n\t}\n\n\tchangeSettings(newSettings) {\n\t\tthis.setState({settings:newSettings});\n\t}\n\n\tchangeHandle(newHandle) {\n\t\tthis.setState({handle:newHandle});\n\t}\n\n\tqueueingAck() { \n\t\tthis.setState({gameState:GameState.QUEUEING});\n\t}\n\n\tmatchFound(data) {\n\t\tthis.gameId = data.gameId;\n\t\tthis.ourPlayer = data.ourPlayer;\n\t\tthis.setState({redHandle:data.redHandle,blueHandle:data.blueHandle,gameState:GameState.RUNNING} , this.reset1v1)\n\t}\n\n\tgameOver(data) {\n\t\tthis.setState({gameState:GameState.NOT_QUEUEING});\n\t}\n\n\tchangeGameState(newState) {\n\t\tif (newState === GameState.QUEUEING) {\n\t\t\tapi.queue(this.state.handle,this.queueingAck.bind(this));\n\t\t}\n\t\telse \n\t\t\tthis.setState({gameState:newState});\n\t\t\n\t\tif (newState === GameState.GOAL_SCORED) {\n\t\t\tthis.resetPositions();\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div style = {backgroundStyling}>\n\n\t\t\t<div >\n\t\t\t\t<h1>Pong++ Multiplayer</h1>\n\t\t\t\t<center>\n\t\t\t\t\t<QueueBox handle = {this.state.handle} gameState = {this.state.gameState} handleChangeHandler = {this.changeHandle} \n\t\t\t\t\tgameStateChangeHandler = {this.changeGameState}/>\n\n\t\t\t\t</center>\n\t\t\t\t<canvas ref = \"canvas\" width = \"501\" height = \"501\"/>\n\t\t\t\t<Scoreboard redScore = {this.state.redScore} blueScore = {this.state.blueScore}/>\n\t\t\t\t\n\t\t\t\t<Settings settings = {this.state.settings} changeHandler = {this.changeSettings}/>\n\n\t\t\t\n\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n\t\n}\n\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'react-app-polyfill/ie11';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}