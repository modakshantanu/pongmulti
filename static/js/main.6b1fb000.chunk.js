(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,i){e.exports=i(227)},172:function(e,t,i){},173:function(e,t,i){},221:function(e,t){},227:function(e,t,i){"use strict";i.r(t);i(113);var a=i(0),n=i.n(a),s=i(108),r=i.n(s),l=(i(172),i(14)),o=i(3),h=i(1),c=i(10),d=i(8),u=i(2),p=i(9),y=function(){function e(){Object(o.a)(this,e),this.pressedKeys={left:!1,right:!1}}return Object(h.a)(e,[{key:"bindKeys",value:function(){window.addEventListener("keyup",this.handleKeys.bind(this,!1)),window.addEventListener("keydown",this.handleKeys.bind(this,!0))}},{key:"unbindKeys",value:function(){window.removeEventListener("keyup",this.handleKeys),window.removeEventListener("keydown",this.handleKeys)}}]),Object(h.a)(e,[{key:"handleKeys",value:function(e,t){var i=this.pressedKeys;switch(t.key){case"a":case"A":i.left=!!e;break;case"d":case"D":i.right=!!e}this.pressedKeys=i}}]),e}(),f=(i(173),i(111));function g(e,t,i,a){return Math.sqrt(Math.pow(e-i,2)+Math.pow(t-a,2))}function b(e,t){var i=e.x,a=e.y;return{x:Math.cos(t)*i-Math.sin(t)*a,y:Math.sin(t)*i+Math.cos(t)*a}}function x(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i=t.x*e.x+t.y*e.y,a=e;return a.x-=2*i*t.x,a.y-=2*i*t.y,a}var m=i(15),v=i.n(m);var E=function(){function e(t){Object(o.a)(this,e),this.x1=t.x1||0,this.y1=t.y1||0,this.x2=t.x2||0,this.y2=t.y2||0,this.color=t.color||"#000",this.depth=t.depth||10,this.width=t.width||50,this.position=50,this.paddleCenterX=(this.x1+this.x2)/2,this.paddleCenterY=(this.y1+this.y2)/2,this.previousCenterX=this.paddleCenterX,this.previousCenterY=this.paddleCenterY,this.slidinglength=g(this.x1,this.y1,this.x2,this.y2),this.y1===this.y2?this.tiltAngle=90*Math.PI/180:this.tiltAngle=-Math.atan((this.x2-this.x1)/(this.y2-this.y1)),this.minPosition=this.width/this.slidinglength*100/2,this.maxPosition=100*(1-this.width/this.slidinglength/2),this.powerup=0,this.powerupTimer=0,this.inputTicks=0}return Object(h.a)(e,[{key:"updatePosition",value:function(e){this.previousCenterX=this.paddleCenterX,this.previousCenterY=this.paddleCenterY,this.position=e,this.paddleCenterX=this.x1*(1-this.position/100)+this.x2*this.position/100,this.paddleCenterY=this.y1*(1-this.position/100)+this.y2*this.position/100}},{key:"getReflection",value:function(e){for(var t,i=this.getHitbox(),a=0;a<4&&(t=[i[a].x,i[a].y,i[(a+1)%4].x,i[(a+1)%4].y],!v.a.circleLine.apply(v.a,[e.x,e.y,e.radius].concat(Object(f.a)(t))));a++);var n=b({x:t[2]-t[0],y:t[3]-t[1]},Math.PI/2),s={x:(t[2]+t[0])/2,y:(t[3]+t[1])/2},r=Object(l.a)({},s);r.x+=1e-4*n.x,r.y+=1e-4*n.y,g(this.paddleCenterX,this.paddleCenterY,s.x,s.y)>g(this.paddleCenterX,this.paddleCenterY,r.x,r.y)&&(n.x*=-1,n.y*=-1);var o=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2));n.x/=o,n.y/=o;var h=x({x:e.dx,y:e.dy},n,1);h.x+=.04*(e.x-this.paddleCenterX)*.5,h.y+=.04*(e.y-this.paddleCenterY)*.5;var c={x:this.paddleCenterX-this.previousCenterX,y:this.paddleCenterY-this.previousCenterY};return 0===c.x&&0===c.y?h:h=b(h,.2*function(e,t){var i=e.x,a=e.y,n=t.x,s=t.y;return Math.atan(i*s-a*n,i*n+a*s)}(h,c))}},{key:"update",value:function(e,t){if(!this.hidden){t.left||t.right?this.inputTicks++:this.inputTicks=1;t.right&&(this.position+=.5),t.left&&(this.position-=.5),this.position>this.maxPosition&&(this.position=this.maxPosition),this.position<this.minPosition&&(this.position=this.minPosition),this.previousCenterX=this.paddleCenterX,this.previousCenterY=this.paddleCenterY,this.paddleCenterX=this.x1*(1-this.position/100)+this.x2*this.position/100,this.paddleCenterY=this.y1*(1-this.position/100)+this.y2*this.position/100}}},{key:"draw",value:function(e){if(this.paddleCenterX=this.x1*(1-this.position/100)+this.x2*this.position/100,this.paddleCenterY=this.y1*(1-this.position/100)+this.y2*this.position/100,!this.hidden){var t=e.context;t.save(),t.translate(.5,.5),t.strokeStyle="#000000",t.fillStyle="#888888",t.translate(this.paddleCenterX,this.paddleCenterY),t.rotate(this.tiltAngle),t.fillRect(-this.depth/2,-this.width/2,this.depth,this.width),t.restore()}}},{key:"getHitbox",value:function(){var e=this,t=this.width/2,i=this.depth/2;return[{x:i,y:t},{x:i,y:-t},{x:-i,y:-t},{x:-i,y:t}].map(function(t){var i=b(t,e.tiltAngle),a=i.x,n=i.y;return{x:a+e.paddleCenterX,y:n+e.paddleCenterY}})}},{key:"getInnerWall",value:function(){var e=b({x:this.depth/2,y:0},this.tiltAngle);return g(this.x1,this.y1,250,250)<g(this.x1+e.x,this.y1+e.y,250,250)&&(e.x*=-1,e.y*=-1),{x1:this.x1+e.x,y1:this.y1+e.y,x2:this.x2+e.x,y2:this.y2+e.y}}}]),e}(),k=function(){function e(t){Object(o.a)(this,e),this.x=t.x||0,this.y=t.y||0,this.dx=t.dx||0,this.dy=t.dy||0,this.radius=10,this.delete=!1,this.r=0,this.dr=0,this.color=t.color||"#000",this.prevX=t.x,this.prevY=t.y,this.lastUpdateTime=Date.now()}return Object(h.a)(e,[{key:"draw",value:function(e){Date.now(),this.lastUpdateTime;var t=this.x,i=this.y,a=e.context;a.save(),a.translate(t+.5,i+.5),a.rotate(this.r),"red"===this.color?a.fillStyle="#800":"blue"===this.color?a.fillStyle="#008":a.fillStyle="#888",a.beginPath(),a.arc(0,0,this.radius,this.radius,0,2*Math.PI),a.fill(),a.closePath(),a.restore()}},{key:"update",value:function(){this.prevX=this.x,this.prevY=this.y,this.x+=this.dx,this.y+=this.dy,isNaN(this.dx)&&console.log(this.x),this.r+=this.dr,Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2))<1&&(this.dx*=1.2,this.dy*=1.2),this.lastUpdateTime=Date.now()}}]),e}(),C=i(229),w={display:"inline-block",alignItems:"center",justifyContent:"center",textAlign:"center",padding:0,border:"0.1em solid black",width:20},S=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{style:Object(l.a)({},w,{background:this.props.color,color:"white"})},this.props.content)}}]),t}(n.a.Component),O={position:"fixed",bottom:0,left:0},j={position:"absolute",left:10,bottom:50,width:300,minHeight:150,border:"2px solid blue",background:"\t#00FF00",zIndex:"1"},I={width:"100px",padding:"2px",border:"2px solid blue",margin:"2px",textAlign:"center",fontSize:15,borderRadius:"2",userSelect:"none",position:""},P={height:50,width:100,margin:"auto",padding:10,float:"center"},T={width:"50%",height:50,float:"left",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0px 0px 0px 11px red inset"},N={margin:0,height:20,float:"left",display:"flex",alignItems:"center",justifyContent:"center"},A={marginLeft:"50%",height:50,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0px 0px 0px 11px blue inset"},U={margin:10,height:20,display:"flex",alignItems:"center",justifyContent:"right",float:"center"},H=function(e){function t(){var e,i;Object(o.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(i=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={display:!1},i.handleOnClick=function(){i.setState(function(e){return{display:!e.display}})},i}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=n.a.createElement("div",{style:j},n.a.createElement("h2",{align:"centre"},"\tControls "),n.a.createElement("div",{align:"left"},n.a.createElement("span",{style:{display:"inline-block",float:" centre",margin:10}},n.a.createElement("div",null,"Red 1"),n.a.createElement("span",{style:N},n.a.createElement(S,{content:"1",color:"red"})),n.a.createElement("span",{style:U},n.a.createElement(S,{content:"2",color:"red"}))),n.a.createElement("span",{style:{display:"inline-block",float:" centre",margin:10}},n.a.createElement("div",null,"Red 2"),n.a.createElement("span",{style:N},n.a.createElement(S,{content:"S",color:"red"})),n.a.createElement("span",{style:U},n.a.createElement(S,{content:"D",color:"red"}))),n.a.createElement("span",{style:{display:"inline-block",float:" centre",margin:10}},n.a.createElement("div",null,"Red 3"),n.a.createElement("span",{style:N},n.a.createElement(S,{content:"V",color:"red"})),n.a.createElement("span",{style:U},n.a.createElement(S,{content:"B",color:"red"}))),n.a.createElement("span",{style:{display:"inline-block",float:" centre",margin:10}}),n.a.createElement("span",{style:{display:"inline-block",float:" centre",margin:10}},n.a.createElement("div",null,"Blue 1"),n.a.createElement("span",{style:N},n.a.createElement(S,{color:"blue",content:"-"})),n.a.createElement("span",{style:U},n.a.createElement(S,{content:"=",color:"blue"}))),n.a.createElement("span",{style:{display:"inline-block",float:" centre",margin:10}},n.a.createElement("div",null,"Blue 2"),n.a.createElement("span",{style:N},n.a.createElement(S,{content:"L",color:"blue"})),n.a.createElement("span",{style:U},n.a.createElement(S,{content:";",color:"blue"}))),n.a.createElement("span",{style:{display:"inline-block",float:" centre",margin:10}},n.a.createElement("div",null,"Blue 3"),n.a.createElement("span",{style:N},n.a.createElement(S,{content:"N",color:"blue"})),n.a.createElement("span",{style:U},n.a.createElement(S,{content:"M",color:"blue"})))),n.a.createElement("div",null,"To play, select your desired settings, and press one of the reset buttons to choose the number of players. Controls are shown above."),n.a.createElement("hr",null),n.a.createElement("div",null,"In a 1v1 game, the players playing are Red 1 and Blue 1. For 2v2, it's Red 1 and Red 2 vs Blue 1 and Blue 2. Similar for 3v3"),n.a.createElement("hr",null),n.a.createElement("div",null,"When playing with powerups, hit the ball over a green square to collect a powerup. Press '3' for Red team or '0' for blue team to use the powerup"),n.a.createElement("hr",null),n.a.createElement("div",null));return n.a.createElement("div",null,n.a.createElement("div",{style:P},n.a.createElement("div",{id:"red",style:T},this.props.redScore),n.a.createElement("div",{id:"blue",style:A},this.props.blueScore)),n.a.createElement("div",{style:O},this.state.display?e:"",n.a.createElement("div",null,n.a.createElement(C.a,{style:I,variant:"primary",onClick:this.handleOnClick},"Instructions"))))}}]),t}(n.a.Component),R=function(){function e(t){Object(o.a)(this,e),this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2}return Object(h.a)(e,[{key:"getReflection",value:function(e){var t=b({x:this.x2-this.x1,y:this.y2-this.y1},Math.PI/2),i={x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2},a=Object(l.a)({},i);a.x+=.001*t.x,a.y+=.001*t.y,g(e.x,e.y,i.x,i.y)<g(e.x,e.y,a.x,a.y)&&(t.x*=-1,t.y*=-1);var n=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return t.x/=n,t.y/=n,x({x:e.dx,y:e.dy},t,1)}},{key:"draw",value:function(e){var t=e.context;t.save(),t.strokeStyle="#000",t.beginPath(),t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.stroke(),t.restore()}}]),e}(),M=function(){function e(t){Object(o.a)(this,e),this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2,this.color=t.color||"red",this.teamId=t.teamId||0}return Object(h.a)(e,[{key:"draw",value:function(e){var t=e.context;t.save(),t.strokeStyle=this.color,t.beginPath(),t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.stroke(),t.restore()}},{key:"render",value:function(e){var t=e.context;t.save(),t.strokeStyle=this.color,t.beginPath(),t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.stroke(),t.restore()}}]),e}(),G={position:"fixed",bottom:0,right:0},_={background:"#AAAAFF",width:"90%",margin:"auto",marginTop:"2px"},D={position:"absolute",right:10,bottom:30,width:300,minHeight:150,border:"2px solid blue",background:"#8888ff",zIndex:"1"},X={width:"100px",padding:"2px",border:"2px solid blue",margin:"2px",textAlign:"center",borderRadius:"2",userSelect:"none",position:"fixed",bottom:0,right:0,fontSize:15},Y=function(e){function t(e){var i;return Object(o.a)(this,t),(i=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={opened:!1},i.toggleDropdown=i.toggleDropdown.bind(Object(u.a)(i)),i.AICheckboxChange=i.AICheckboxChange.bind(Object(u.a)(i)),i.curveballChange=i.curveballChange.bind(Object(u.a)(i)),i.powerupsChange=i.powerupsChange.bind(Object(u.a)(i)),i.accelChange=i.accelChange.bind(Object(u.a)(i)),i.trailChange=i.trailChange.bind(Object(u.a)(i)),i}return Object(p.a)(t,e),Object(h.a)(t,[{key:"toggleDropdown",value:function(){this.setState(function(e){return{opened:!e.opened}})}},{key:"AICheckboxChange",value:function(e){var t=this.props.settings;t.AI[e.target.id]=!t.AI[e.target.id],this.props.changeHandler(t)}},{key:"curveballChange",value:function(e){var t=this.props.settings;t.curveball=e.target.checked,this.props.changeHandler(t)}},{key:"powerupsChange",value:function(e){var t=this.props.settings;t.powerups=e.target.checked,this.props.changeHandler(t)}},{key:"accelChange",value:function(e){var t=this.props.settings;t.accel=e.target.checked,this.props.changeHandler(t)}},{key:"trailChange",value:function(e){var t=this.props.settings;t.trail=e.target.checked,this.props.changeHandler(t)}},{key:"render",value:function(){var e=n.a.createElement("input",{type:"checkbox",checked:this.props.settings.trail,onChange:this.trailChange}),t=n.a.createElement("div",{style:D},n.a.createElement("div",{style:_},n.a.createElement("div",{style:{fontSize:"16px"}},"Graphics Settings"),n.a.createElement("div",null,"Ball Trail ",e)));return n.a.createElement("div",{style:G},this.state.opened?t:"",n.a.createElement("button",{style:X,onClick:this.toggleDropdown},"Settings ",this.state.opened?"\u2193":"\u2191"," "))}}]),t}(n.a.Component),L=function(){function e(t){Object(o.a)(this,e),this.x=t.x,this.y=t.y,this.lifetime=40,this.delete=!1,this.color=t.color||"#888"}return Object(h.a)(e,[{key:"draw",value:function(e){var t=e.context;t.fillStyle=this.color,t.beginPath();var i=this.lifetime/10;t.fillRect(this.x-i/2,this.y-i/2,i,i),t.fill(),t.closePath()}},{key:"update",value:function(){this.lifetime--,this.lifetime<=0&&(this.delete=!0)}}]),e}(),K=function(){function e(t){Object(o.a)(this,e),this.playerName=t.playerName||"Untitled",this.color=t.color||"red",this.left=t.left,this.right=t.right,this.x=t.x,this.y=t.y}return Object(h.a)(e,[{key:"draw",value:function(e){var t=e.context;t.textBaseline="top",t.font="14px sans-serif";var i=t.measureText(this.playerName).width+4;i<42&&(i=42);var a=this.x-i/2,n=this.y-17;t.beginPath(),t.rect(a,n,i,34),t.strokeStyle="red"===this.color?"red":"blue",t.stroke(),t.fillStyle="red"===this.color?"#f88":"#88f",t.fill(),t.fillStyle="black",t.strokeStyle="black",t.fillText(this.playerName,a+2,n+2),t.closePath(),t.font="14px Courier New",t.beginPath(),t.moveTo(a+7,n+18),t.lineTo(a+2,n+18+7),t.lineTo(a+7,n+18+14),t.fill(),t.beginPath(),t.moveTo(a+35,n+18),t.lineTo(a+40,n+18+7),t.lineTo(a+35,n+18+14),t.fill(),t.fillText(this.left,a+9,n+18),t.fillText(this.right,a+24,n+18)}}]),e}(),F=0,B=1,q=function(e){function t(e){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t=this;switch(this.props.gameState){case F:e="Queue";break;case B:e="Queueing";break;default:e="In Game"}return n.a.createElement("div",null,"Choose a username: ",n.a.createElement("input",{type:"text",value:this.props.handle,onChange:function(e){return t.props.handleChangeHandler(e.target.value)}}),n.a.createElement("button",{onClick:function(){console.log("Queue clicked"),t.props.gameState===F&&t.props.gameStateChangeHandler(B)}},e))}}]),t}(n.a.Component),Q=i(110),W=i.n(Q)()("http://localhost:8000",{secure:!0}),z={POSITION:0,STATE:1};Date.now();i(224);var J,V,$={backgroundColor:"\t#fff"},Z={NOT_QUEUEING:0,QUEUEING:1,PRE_MATCH:2,RUNNING:3,GOAL_SCORED:4,POST_MATCH:5},ee=0,te=1,ie=function(e){function t(e){var i;return Object(o.a)(this,t),(i=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={input:new y,context:null,gameState:Z.NOT_QUEUEING,redScore:0,blueScore:0,redHandle:"Red 1",blueHandle:"Blue 1",settings:{trail:!0},handle:""},i.reset1v1=i.reset1v1.bind(Object(u.a)(i)),i.resetPositions=i.resetPositions.bind(Object(u.a)(i)),i.updatePaddles=i.updatePaddles.bind(Object(u.a)(i)),i.changeSettings=i.changeSettings.bind(Object(u.a)(i)),i.createParticle=i.createParticle.bind(Object(u.a)(i)),i.sendInput=i.sendInput.bind(Object(u.a)(i)),i.update=i.update.bind(Object(u.a)(i)),i.draw=i.draw.bind(Object(u.a)(i)),i.changeGameState=i.changeGameState.bind(Object(u.a)(i)),i.changeHandle=i.changeHandle.bind(Object(u.a)(i)),i.stateUpdate=i.stateUpdate.bind(Object(u.a)(i)),i.posUpdate=i.posUpdate.bind(Object(u.a)(i)),i.winningTeam="",i.tickCounter=0,i.cutsceneCounter=0,i.gameId=-1,i.ourPlayer=-1,i.prevInput={left:!1,right:!1},i}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.state.input.bindKeys();var e,t,i,a,n=this.refs.canvas.getContext("2d");this.setState({context:n}),this.reset1v1(),requestAnimationFrame(this.draw),setInterval(this.update,1e3/120),e=this.matchFound.bind(this),t=this.stateUpdate,i=this.posUpdate,a=this.gameOver.bind(this),W.on("match",function(t){e(t),console.log("match started",t)}),W.on("gameUpdate",function(e){e.type===z.STATE?t(e):e.type===z.POSITION&&i(e)}),W.on("gameOver",function(e){a(e)})}},{key:"reset1v1",value:function(){this.particles=[],this.tickCounter=0,this.walls=[new R({x1:0,y1:100,x2:500,y2:100}),new R({x1:0,y1:399,x2:500,y2:399})],this.goals=[new M({x1:0,y1:100,x2:0,y2:400,color:"red",teamId:ee}),new M({x1:499,y1:100,x2:499,y2:400,color:"blue",teamId:te})],this.paddles=[new E({x1:10,y1:100,x2:10,y2:400,color:"red"}),new E({x1:490,y1:400,x2:490,y2:100,color:"blue"})],this.playerCards=[new K({playerName:this.state.redHandle,color:"red",x:25,y:50,left:"v",right:"b"}),new K({playerName:this.state.blueHandle,color:"blue",x:475,y:50,left:"-",right:"="})],this.ball=new k({x:250,y:250}),this.resetPositions()}},{key:"stateUpdate",value:function(e){switch(e.state){case Z.PRE_MATCH:this.cutsceneCounter=360,this.setState({gameState:Z.PRE_MATCH});break;case Z.RUNNING:this.cutsceneCounter=0,this.setState({gameState:Z.RUNNING});break;case Z.GOAL_SCORED:this.cutsceneCounter=180,this.setState({gameState:Z.GOAL_SCORED,redScore:e.redScore,blueScore:e.blueScore}),J=(0===e.scorer?this.state.redHandle:this.state.blueHandle)+" has scored",V=0===e.scorer?"red":"blue",this.tickCounter=e.tickCounter;break;default:console.log("INVALID PACKET")}}},{key:"posUpdate",value:function(e){if(this.state.gameState===Z.RUNNING){this.tickCounter,e.frame;var t=new k(Object(l.a)({},e.ball));this.ball.x=t.x,this.ball.y=t.y,this.ball.dx=t.dx,this.ball.dy=t.dy,this.ball.color=t.color;for(var i=0;i<2;i++)this.paddles[i].updatePosition(e.paddlePos[i])}}},{key:"resetPositions",value:function(){this.particles=[],this.ball=new k({x:250,y:250,dx:0,dy:0}),this.paddles.forEach(function(e){e.position=50})}},{key:"updatePaddles",value:function(){if(-1!==this.ourPlayer){var e=this.state.input.pressedKeys;this.paddles[this.ourPlayer].update(this.state,e)}}},{key:"createParticle",value:function(e){this.state.settings.trail&&this.particles.push(new L(e))}},{key:"update",value:function(){var e=this;if(this.state.gameState!==Z.NOT_QUEUEING&&this.state.gameState!==Z.QUEUEING){if(this.state.gameState!==Z.PRE_MATCH&&this.state.gameState!==Z.GOAL_SCORED||(this.cutsceneCounter--,0===this.cutsceneCounter&&(this.state.gameState!==Z.GOAL_SCORED||5!==this.state.redScore&&5!==this.state.blueScore?this.setState({gameState:Z.RUNNING}):(this.winningTeam=this.state.redScore>this.state.blueScore?"Red ":"Blue",this.resetPositions(),this.setState({gameState:Z.POST_MATCH}),this.cutsceneCounter=180))),this.state.gameState===Z.POST_MATCH&&(this.cutsceneCounter--,0===this.cutsceneCounter&&this.setState({gameState:Z.NOT_QUEUEING})),this.state.gameState===Z.RUNNING&&this.tickCounter++,this.tickCounter%2===0){for(;this.particles[0]&&this.particles[0].delete;)this.particles.shift();this.particles.forEach(function(e){return e.update()}),this.createParticle({x:this.ball.x,y:this.ball.y,color:this.ball.color})}this.paddles.forEach(function(t){var i,a=t.getHitbox(),n=[];if(a.forEach(function(e){n.push(e.x),n.push(e.y)}),v.a.circlePolygon(e.ball.x,e.ball.y,e.ball.radius,n)){var s=t.getReflection(e.ball);e.ball.dx=s.x,e.ball.dy=s.y,e.ball.x+=e.ball.dx,e.ball.y+=e.ball.dy,e.createParticle({x:(i=e.ball).x,y:i.y}),e.ball.color=t.color}}),this.walls.forEach(function(t){if(v.a.circleLine(e.ball.x,e.ball.y,e.ball.radius,t.x1,t.y1,t.x2,t.y2)){var i=t.getReflection(e.ball);e.ball.dx=i.x,e.ball.dy=i.y}}),this.ball.update(this.state),this.updatePaddles(),this.sendInput(this.state.input.pressedKeys)}}},{key:"draw",value:function(){var e=this,t=this.state.context;if(this.state.gameState===Z.GOAL_SCORED)return t.font="30px Courier New",t.fillStyle=V,t.fillText(J,80,250),void requestAnimationFrame(this.draw);if(t.save(),t.fillStyle="#FFF",t.translate(.5,.5),t.fillRect(0,0,500,500),this.state.gameState===Z.PRE_MATCH&&(t.font="30px Courier New",t.fillStyle="#000",t.fillText("First to 5",150,220),t.fillText("Good Luck!",150,290)),this.state.gameState===Z.POST_MATCH){t.font="30px Courier New",t.fillStyle="#000";var i=this.winningTeam+" Team Wins!";t.fillText(i,120,220)}this.walls.forEach(function(t){return t.draw(e.state)}),this.goals.forEach(function(t){return t.draw(e.state)}),this.playerCards.forEach(function(t){return t.draw(e.state)}),this.particles.forEach(function(t){return t.draw(e.state)}),this.paddles.forEach(function(t){return t.draw(e.state)}),this.ball.draw(this.state),t.restore(),requestAnimationFrame(this.draw)}},{key:"sendInput",value:function(e){var t;e.left===this.prevInput.left&&(e.right,this.prevInput.right),this.prevInput.left=e.left,this.prevInput.right=e.right,t={keys:e,tick:this.tickCounter,ourPlayer:this.ourPlayer,gameId:this.gameId},W.emit("input",t)}},{key:"componentWillUnmount",value:function(){this.state.input.unbindKeys()}},{key:"changeSettings",value:function(e){this.setState({settings:e})}},{key:"changeHandle",value:function(e){this.setState({handle:e})}},{key:"queueingAck",value:function(){this.setState({gameState:Z.QUEUEING})}},{key:"matchFound",value:function(e){this.gameId=e.gameId,this.ourPlayer=e.ourPlayer,this.setState({redHandle:e.redHandle,blueHandle:e.blueHandle,gameState:Z.RUNNING},this.reset1v1)}},{key:"gameOver",value:function(e){this.setState({gameState:Z.NOT_QUEUEING})}},{key:"changeGameState",value:function(e){var t,i;e===Z.QUEUEING?(t=this.state.handle,i=this.queueingAck.bind(this),W.emit("queueing",t),W.on("queueingAck",i)):this.setState({gameState:e}),e===Z.GOAL_SCORED&&this.resetPositions()}},{key:"render",value:function(){return n.a.createElement("div",{style:$},n.a.createElement("div",null,n.a.createElement("h1",null,"Pong++ Multiplayer"),n.a.createElement("center",null,n.a.createElement(q,{handle:this.state.handle,gameState:this.state.gameState,handleChangeHandler:this.changeHandle,gameStateChangeHandler:this.changeGameState})),n.a.createElement("canvas",{ref:"canvas",width:"501",height:"501"}),n.a.createElement(H,{redScore:this.state.redScore,blueScore:this.state.blueScore}),n.a.createElement(Y,{settings:this.state.settings,changeHandler:this.changeSettings})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[112,1,2]]]);
//# sourceMappingURL=main.6b1fb000.chunk.js.map